From e18cd0cc7517ab1425a7df6f3f077ac48f805211 Mon Sep 17 00:00:00 2001
From: Michael Trensch <mtrensch@hilscher.com>
Date: Wed, 10 Aug 2022 19:48:02 +0200
Subject: [PATCH 7/7] netx4000: Fix mmc clock setup, otherwise card detection
 will run at 25MHz instead of 400 kHz

Upstream-Status: Pending
---
 drivers/mmc/netx4000-mci.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

diff --git a/drivers/mmc/netx4000-mci.c b/drivers/mmc/netx4000-mci.c
index cc2a549773..ff6381617a 100644
--- a/drivers/mmc/netx4000-mci.c
+++ b/drivers/mmc/netx4000-mci.c
@@ -421,7 +421,7 @@ static void netx4000_mmc_set_clock(struct netx4000_mmc_priv *priv, u32 clock)
 		writel( 0xFF, &priv->regs->sd_clk_ctrl);
         } else {
 		div = 2;
-		while (div < 1024) {
+		while (div < 512) {
 			if (clock > (max/div))
 				break;
 			div <<= 1;
-- 
2.25.1

